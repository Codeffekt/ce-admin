<ce-nav-layout>

  <ce-navbar ceNavBar>
    <ce-navbar-content>
      <ce-nav-breadcrumb-items></ce-nav-breadcrumb-items>

    </ce-navbar-content>
    <ce-navbar-actions alignment="end">
      <button mat-icon-button class="ms-2" [matMenuTriggerFor]="menu" (click)="$event.stopPropagation()">
        <mat-icon>more_vert</mat-icon>
      </button>
    </ce-navbar-actions>
  </ce-navbar>

  <mat-menu #menu="matMenu">
    <button mat-menu-item matTooltip="Mise à niveau du formulaire" (ngReallyClick)="upgradeForm()"
            ngReallyTitle="Confirmation requise"
            ngReallyMessage="Voulez-vous vraiment mettre à niveau ce formulaire ?">
      <mat-icon>update</mat-icon>Upgrade
    </button>
    <button mat-menu-item matTooltip="Supprimer le formulaire" (ngReallyClick)="deleteForm()"
            ngReallyTitle="Confirmation requise" ngReallyMessage="Voulez-vous vraiment supprimer ce formulaire ?">
      <mat-icon>delete</mat-icon>Supprimer
    </button>
  </mat-menu>

  <ce-form-editor-toolbar [form]="form"></ce-form-editor-toolbar>

  <ce-row gap="12px">
    <div class="form-editor-panel" rowFill>
      <!-- <ce-form [rebuildOnChanges]="true" [formWrapper]="formWrapper" [formMask]="formMask"
               (formChanges)="formChanges($event)">
      </ce-form> -->
      <ce-form-factory [rebuildOnChanges]="true" [formWrapper]="formWrapper" [formMask]="formMask"
            (formChanges)="formChanges($event)"></ce-form-factory>
      <button mat-fab (click)="openJSONEditor()"><mat-icon>code</mat-icon></button>
    </div>
    <ce-form-editor-details [form]="form" *ngIf="(formEditorLayout$ | async)!.showDetails">
    </ce-form-editor-details>
  </ce-row>

</ce-nav-layout>